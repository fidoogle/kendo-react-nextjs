{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport React, { useState, useEffect } from 'react';\nimport Nav from '../components/nav';\nimport { w3cwebsocket as W3CWebSocket } from 'websocket';\nvar ws = new W3CWebSocket('wss://echo.websocket.org/');\n\nvar configureWs = function configureWs(setDataFromServer) {\n  ws.onopen = function () {\n    // on connecting, do nothing but log it to the console\n    console.log('connected');\n  };\n\n  ws.onmessage = function (evt) {\n    // may need to parse data sent from the websocket server\n    var msg = JSON.parse(evt.data);\n    console.log('onmessage: ', evt.data);\n    setDataFromServer(evt.data);\n  };\n\n  ws.onclose = function () {\n    console.log('disconnected'); //TODO: automatically try to reconnect on connection loss\n  };\n\n  sendMessages();\n};\n\nvar getRndInteger = function getRndInteger(min, max) {\n  var rnd = Math.floor(Math.random() * (max - min + 1)) + min;\n  return Math.round(rnd / 100) * 100; //rounds to nearest 100\n};\n\nvar buildMsg = function buildMsg() {\n  return _JSON$stringify({\n    month: \"Oct 19\",\n    volume: getRndInteger(500, 7500)\n  });\n};\n\nvar sendMessages = function sendMessages() {\n  var sendMsgs = setInterval(function () {\n    ws.send(buildMsg());\n  }, 2000);\n  setTimeout(function () {\n    clearInterval(sendMsgs);\n  }, 15000);\n};\n\nexport { configureWs }; // const Main = () => {\n//     const [dataFromServer, setDataFromServer] = useState('');\n//     useEffect(() => configureWs(setDataFromServer), []);\n//     return (\n//         <>\n//             <Nav/>\n//             <div>\n//                 The websocket returned: {dataFromServer}\n//             </div>\n//         </>\n//     )\n// }\n// export default Main;","map":{"version":3,"sources":["C:/Users/figuajardo/Sites/kendo-react-nextjs/components/websocket_old.js"],"names":["React","useState","useEffect","Nav","w3cwebsocket","W3CWebSocket","ws","configureWs","setDataFromServer","onopen","console","log","onmessage","evt","msg","JSON","parse","data","onclose","sendMessages","getRndInteger","min","max","rnd","Math","floor","random","round","buildMsg","month","volume","sendMsgs","setInterval","send","setTimeout","clearInterval"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,GAAP,MAAgB,mBAAhB;AACA,SAASC,YAAY,IAAIC,YAAzB,QAA6C,WAA7C;AAEA,IAAMC,EAAE,GAAG,IAAID,YAAJ,CAAiB,2BAAjB,CAAX;;AAEA,IAAME,WAAW,GAAG,SAAdA,WAAc,CAACC,iBAAD,EAAuB;AACvCF,EAAAA,EAAE,CAACG,MAAH,GAAY,YAAM;AACd;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACH,GAHD;;AAKAL,EAAAA,EAAE,CAACM,SAAH,GAAe,UAAAC,GAAG,EAAI;AAClB;AACA,QAAMC,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWH,GAAG,CAACI,IAAf,CAAZ;AACAP,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BE,GAAG,CAACI,IAA/B;AACAT,IAAAA,iBAAiB,CAACK,GAAG,CAACI,IAAL,CAAjB;AACH,GALD;;AAOAX,EAAAA,EAAE,CAACY,OAAH,GAAa,YAAM;AACfR,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EADe,CAEf;AAEH,GAJD;;AAMAQ,EAAAA,YAAY;AACf,CApBD;;AAsBA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,GAAD,EAAMC,GAAN,EAAc;AAChC,MAAMC,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,MAAiBJ,GAAG,GAAGD,GAAN,GAAY,CAA7B,CAAX,IAA+CA,GAA3D;AACA,SAAOG,IAAI,CAACG,KAAL,CAAWJ,GAAG,GAAC,GAAf,IAAoB,GAA3B,CAFgC,CAEA;AACnC,CAHD;;AAKA,IAAMK,QAAQ,GAAG,SAAXA,QAAW,GAAM;AACnB,SAAO,gBAAe;AAAEC,IAAAA,KAAK,EAAE,QAAT;AAAmBC,IAAAA,MAAM,EAAEV,aAAa,CAAC,GAAD,EAAM,IAAN;AAAxC,GAAf,CAAP;AACH,CAFD;;AAIA,IAAMD,YAAY,GAAG,SAAfA,YAAe,GAAM;AACvB,MAAMY,QAAQ,GAAGC,WAAW,CAAC,YAAM;AAAE1B,IAAAA,EAAE,CAAC2B,IAAH,CAAQL,QAAQ,EAAhB;AAAqB,GAA9B,EAAgC,IAAhC,CAA5B;AACAM,EAAAA,UAAU,CAAC,YAAM;AAAEC,IAAAA,aAAa,CAACJ,QAAD,CAAb;AAAwB,GAAjC,EAAmC,KAAnC,CAAV;AACH,CAHD;;AAKA,SAASxB,WAAT,G,CAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Nav from '../components/nav';\r\nimport { w3cwebsocket as W3CWebSocket } from 'websocket';\r\n\r\nconst ws = new W3CWebSocket('wss://echo.websocket.org/');\r\n\r\nconst configureWs = (setDataFromServer) => {\r\n    ws.onopen = () => {\r\n        // on connecting, do nothing but log it to the console\r\n        console.log('connected')\r\n    }\r\n\r\n    ws.onmessage = evt => {\r\n        // may need to parse data sent from the websocket server\r\n        const msg = JSON.parse(evt.data)\r\n        console.log('onmessage: ', evt.data);\r\n        setDataFromServer(evt.data);\r\n    }\r\n\r\n    ws.onclose = () => {\r\n        console.log('disconnected')\r\n        //TODO: automatically try to reconnect on connection loss\r\n\r\n    }\r\n\r\n    sendMessages();\r\n}\r\n\r\nconst getRndInteger = (min, max) => {\r\n    const rnd = Math.floor(Math.random() * (max - min + 1) ) + min;\r\n    return Math.round(rnd/100)*100; //rounds to nearest 100\r\n}\r\n\r\nconst buildMsg = () => {\r\n    return JSON.stringify({ month: \"Oct 19\", volume: getRndInteger(500, 7500) });\r\n}\r\n\r\nconst sendMessages = () => {\r\n    const sendMsgs = setInterval(() => { ws.send(buildMsg()) }, 2000);\r\n    setTimeout(() => { clearInterval(sendMsgs)}, 15000);\r\n}\r\n\r\nexport { configureWs }\r\n\r\n// const Main = () => {\r\n//     const [dataFromServer, setDataFromServer] = useState('');\r\n//     useEffect(() => configureWs(setDataFromServer), []);\r\n\r\n//     return (\r\n//         <>\r\n//             <Nav/>\r\n//             <div>\r\n//                 The websocket returned: {dataFromServer}\r\n//             </div>\r\n//         </>\r\n//     )\r\n// }\r\n\r\n// export default Main;\r\n"]},"metadata":{},"sourceType":"module"}