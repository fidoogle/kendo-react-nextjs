{"ast":null,"code":"import _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\figuajardo\\\\Sites\\\\kendo-react-nextjs\\\\pages\\\\websocket.js\";\nimport React, { useState, useEffect } from 'react';\nimport Nav from '../components/nav';\nimport { w3cwebsocket as W3CWebSocket } from 'websocket';\nvar ws = new W3CWebSocket('wss://echo.websocket.org/');\n\nvar configureWs = function configureWs() {\n  ws.onopen = function () {\n    // on connecting, do nothing but log it to the console\n    console.log('connected');\n  };\n\n  ws.onmessage = function (evt) {\n    // listen to data sent from the websocket server\n    //const message = JSON.parse(evt.data)\n    //TODO: this.setState({dataFromServer: message})\n    console.log(evt.data);\n  };\n\n  ws.onclose = function () {\n    console.log('disconnected'); //TODO: automatically try to reconnect on connection loss\n  };\n\n  sendMessages();\n};\n\nvar getRndInteger = function getRndInteger(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\nvar sendMessages = function sendMessages() {\n  var sendMsgs = setInterval(function () {\n    ws.send('Fidel is here ' + getRndInteger(500, 7500));\n  }, 3000);\n  setTimeout(function () {\n    clearInterval(sendMsgs);\n  }, 15000);\n};\n\nvar Main = function Main() {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      dataFromServer = _useState2[0],\n      setDataFromServer = _useState2[1];\n\n  useEffect(function () {\n    return configureWs();\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(Nav, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, \"The websocket returned: \", dataFromServer));\n};\n\nexport default Main;","map":{"version":3,"sources":["C:/Users/figuajardo/Sites/kendo-react-nextjs/pages/websocket.js"],"names":["React","useState","useEffect","Nav","w3cwebsocket","W3CWebSocket","ws","configureWs","onopen","console","log","onmessage","evt","data","onclose","sendMessages","getRndInteger","min","max","Math","floor","random","sendMsgs","setInterval","send","setTimeout","clearInterval","Main","dataFromServer","setDataFromServer"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,GAAP,MAAgB,mBAAhB;AACA,SAASC,YAAY,IAAIC,YAAzB,QAA6C,WAA7C;AAEA,IAAMC,EAAE,GAAG,IAAID,YAAJ,CAAiB,2BAAjB,CAAX;;AAEA,IAAME,WAAW,GAAG,SAAdA,WAAc,GAAM;AACtBD,EAAAA,EAAE,CAACE,MAAH,GAAY,YAAM;AACd;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACH,GAHD;;AAKAJ,EAAAA,EAAE,CAACK,SAAH,GAAe,UAAAC,GAAG,EAAI;AAClB;AACA;AACA;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAYE,GAAG,CAACC,IAAhB;AACH,GALD;;AAOAP,EAAAA,EAAE,CAACQ,OAAH,GAAa,YAAM;AACfL,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EADe,CAEf;AAEH,GAJD;;AAMAK,EAAAA,YAAY;AACf,CApBD;;AAsBA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,GAAD,EAAMC,GAAN,EAAc;AAChC,SAAOC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,MAAiBH,GAAG,GAAGD,GAAN,GAAY,CAA7B,CAAX,IAA+CA,GAAtD;AACH,CAFD;;AAIA,IAAMF,YAAY,GAAG,SAAfA,YAAe,GAAM;AACvB,MAAMO,QAAQ,GAAGC,WAAW,CAAC,YAAM;AAAEjB,IAAAA,EAAE,CAACkB,IAAH,CAAQ,mBAAmBR,aAAa,CAAC,GAAD,EAAM,IAAN,CAAxC;AAAuD,GAAhE,EAAkE,IAAlE,CAA5B;AACAS,EAAAA,UAAU,CAAC,YAAM;AAAEC,IAAAA,aAAa,CAACJ,QAAD,CAAb;AAAwB,GAAjC,EAAmC,KAAnC,CAAV;AACH,CAHD;;AAKA,IAAMK,IAAI,GAAG,SAAPA,IAAO,GAAM;AAAA,kBAC6B1B,QAAQ,CAAC,EAAD,CADrC;AAAA;AAAA,MACR2B,cADQ;AAAA,MACQC,iBADR;;AAEf3B,EAAAA,SAAS,CAAC;AAAA,WAAMK,WAAW,EAAjB;AAAA,GAAD,EAAsB,EAAtB,CAAT;AAEA,SACI,0CACI,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAC6BqB,cAD7B,CAFJ,CADJ;AAQH,CAZD;;AAcA,eAAeD,IAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Nav from '../components/nav';\r\nimport { w3cwebsocket as W3CWebSocket } from 'websocket';\r\n\r\nconst ws = new W3CWebSocket('wss://echo.websocket.org/');\r\n\r\nconst configureWs = () => {\r\n    ws.onopen = () => {\r\n        // on connecting, do nothing but log it to the console\r\n        console.log('connected')\r\n    }\r\n\r\n    ws.onmessage = evt => {\r\n        // listen to data sent from the websocket server\r\n        //const message = JSON.parse(evt.data)\r\n        //TODO: this.setState({dataFromServer: message})\r\n        console.log(evt.data)\r\n    }\r\n\r\n    ws.onclose = () => {\r\n        console.log('disconnected')\r\n        //TODO: automatically try to reconnect on connection loss\r\n\r\n    }\r\n\r\n    sendMessages();\r\n}\r\n\r\nconst getRndInteger = (min, max) => {\r\n    return Math.floor(Math.random() * (max - min + 1) ) + min;\r\n}\r\n\r\nconst sendMessages = () => {\r\n    const sendMsgs = setInterval(() => { ws.send('Fidel is here ' + getRndInteger(500, 7500)); }, 3000);\r\n    setTimeout(() => { clearInterval(sendMsgs)}, 15000);\r\n}\r\n\r\nconst Main = () => {\r\n    const [dataFromServer, setDataFromServer] = useState('');\r\n    useEffect(() => configureWs(), []);\r\n\r\n    return (\r\n        <>\r\n            <Nav/>\r\n            <div>\r\n                The websocket returned: {dataFromServer}\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Main;\r\n"]},"metadata":{},"sourceType":"module"}