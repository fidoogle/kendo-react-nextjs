{"ast":null,"code":"import _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\figuajardo\\\\Sites\\\\kendo-react-nextjs\\\\pages\\\\websocket.js\";\nimport React, { useState, useEffect } from 'react';\nimport Nav from '../components/nav';\nimport { w3cwebsocket as W3CWebSocket } from 'websocket';\nvar ws = new W3CWebSocket('wss://echo.websocket.org/');\n\nfunction configureWs() {\n  ws.onopen = function () {\n    // on connecting, do nothing but log it to the console\n    console.log('connected');\n  };\n\n  ws.onmessage = function (evt) {\n    // listen to data sent from the websocket server\n    //const message = JSON.parse(evt.data)\n    //TODO: this.setState({dataFromServer: message})\n    console.log(evt.data);\n  };\n\n  ws.onclose = function () {\n    console.log('disconnected'); //TODO: automatically try to reconnect on connection loss\n  };\n\n  setTimeout(function () {\n    ws.send('Fidel is here');\n  }, 3000);\n}\n\nvar Main = function Main() {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      dataFromServer = _useState2[0],\n      setDataFromServer = _useState2[1];\n\n  useEffect(function () {\n    return configureWs();\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(Nav, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }, \"The websocket returned: \", dataFromServer));\n};\n\nexport default Main;","map":{"version":3,"sources":["C:/Users/figuajardo/Sites/kendo-react-nextjs/pages/websocket.js"],"names":["React","useState","useEffect","Nav","w3cwebsocket","W3CWebSocket","ws","configureWs","onopen","console","log","onmessage","evt","data","onclose","setTimeout","send","Main","dataFromServer","setDataFromServer"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,GAAP,MAAgB,mBAAhB;AACA,SAASC,YAAY,IAAIC,YAAzB,QAA6C,WAA7C;AAEA,IAAMC,EAAE,GAAG,IAAID,YAAJ,CAAiB,2BAAjB,CAAX;;AAEA,SAASE,WAAT,GAAuB;AACnBD,EAAAA,EAAE,CAACE,MAAH,GAAY,YAAM;AACd;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACH,GAHD;;AAKAJ,EAAAA,EAAE,CAACK,SAAH,GAAe,UAAAC,GAAG,EAAI;AAClB;AACA;AACA;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAYE,GAAG,CAACC,IAAhB;AACH,GALD;;AAOAP,EAAAA,EAAE,CAACQ,OAAH,GAAa,YAAM;AACfL,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EADe,CAEf;AAEH,GAJD;;AAMAK,EAAAA,UAAU,CAAC,YAAM;AAAET,IAAAA,EAAE,CAACU,IAAH,CAAQ,eAAR;AAA2B,GAApC,EAAsC,IAAtC,CAAV;AACH;;AAED,IAAMC,IAAI,GAAG,SAAPA,IAAO,GAAM;AAAA,kBAC6BhB,QAAQ,CAAC,EAAD,CADrC;AAAA;AAAA,MACRiB,cADQ;AAAA,MACQC,iBADR;;AAEfjB,EAAAA,SAAS,CAAC;AAAA,WAAMK,WAAW,EAAjB;AAAA,GAAD,EAAsB,EAAtB,CAAT;AAEA,SACI,0CACI,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAC6BW,cAD7B,CAFJ,CADJ;AAQH,CAZD;;AAcA,eAAeD,IAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Nav from '../components/nav';\r\nimport { w3cwebsocket as W3CWebSocket } from 'websocket';\r\n\r\nconst ws = new W3CWebSocket('wss://echo.websocket.org/');\r\n\r\nfunction configureWs() {\r\n    ws.onopen = () => {\r\n        // on connecting, do nothing but log it to the console\r\n        console.log('connected')\r\n    }\r\n\r\n    ws.onmessage = evt => {\r\n        // listen to data sent from the websocket server\r\n        //const message = JSON.parse(evt.data)\r\n        //TODO: this.setState({dataFromServer: message})\r\n        console.log(evt.data)\r\n    }\r\n\r\n    ws.onclose = () => {\r\n        console.log('disconnected')\r\n        //TODO: automatically try to reconnect on connection loss\r\n\r\n    }\r\n\r\n    setTimeout(() => { ws.send('Fidel is here'); }, 3000);\r\n}\r\n\r\nconst Main = () => {\r\n    const [dataFromServer, setDataFromServer] = useState('');\r\n    useEffect(() => configureWs(), []);\r\n\r\n    return (\r\n        <>\r\n            <Nav/>\r\n            <div>\r\n                The websocket returned: {dataFromServer}\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Main;\r\n"]},"metadata":{},"sourceType":"module"}